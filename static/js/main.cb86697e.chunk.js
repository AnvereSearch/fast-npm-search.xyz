(this["webpackJsonpreact-search-adapter"]=this["webpackJsonpreact-search-adapter"]||[]).push([[0],{51:function(e,t,a){"use strict";var r=a(29);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(59)),n=r(a(61)),i=r(a(30)),c=r(a(31)),o=a(62),h=a(63),u=a(65),l=function(){function e(t){var a=this;(0,i.default)(this,e),this.configuration=new o.Configuration(t),this.configuration.validate(),this.searchClient={search:function(e){return a.searchAnvereAndAdapt(e)},searchForFacetValues:function(e){return a.searchAnvereForFacetValuesAndAdapt(e)}}}return(0,c.default)(e,[{key:"adaptAndPerformAnvereRequest",value:function(){var e=(0,n.default)(s.default.mark((function e(t){var a,r,n,i,c;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.configuration.server,r=a.nodes,n=r[0].applicationId,(i=new URL("".concat(r[0].protocol,"://").concat(r[0].host,"/docs"))).searchParams.set("app_id",n),i.searchParams.set("index_id",t[0].indexName),i.searchParams.set("input",t[0].params.query),i.searchParams.set("highlight","true"),i.searchParams.set("page",t[0].params.page),i.searchParams.set("page_size",t[0].params.hitsPerPage),e.next=12,u.get(i.href);case 12:return c=e.sent,e.abrupt("return",c.data);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchAnvereAndAdapt",value:function(){var e=(0,n.default)(s.default.mark((function e(t){var a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.adaptAndPerformAnvereRequest(t);case 3:return a=e.sent,e.abrupt("return",{results:[a]});case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"searchAnvereForFacetValuesAndAdapt",value:function(){var e=(0,n.default)(s.default.mark((function e(t){var a,r,n=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._adaptAndPerformTypesenseRequest(t);case 3:return a=e.sent,r=a.results.map((function(e,a){return n._validateTypesenseResult(e),new h.FacetSearchResponseAdapter(e,t[a],n.configuration).adapt()})),e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_validateTypesenseResult",value:function(e){if(e.error)throw new Error("".concat(e.code," - ").concat(e.error));if(!e.hits&&!e.grouped_hits)throw new Error("Did not find any hits. ".concat(e.code," - ").concat(e.error))}}]),e}();t.default=l},58:function(e,t,a){},62:function(e,t,a){"use strict";var r=a(29);Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;var s=r(a(30)),n=r(a(31)),i=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),this.server=a.server||{nodes:[{applicationId:"",host:"localhost",routing_key:"",port:"80",path:"",protocol:"https"}]},this.server.cacheSearchResultsForSeconds=null==this.server.cacheSearchResultsForSeconds?120:this.server.cacheSearchResultsForSeconds,this.additionalSearchParameters=a.additionalSearchParameters||{},this.additionalSearchParameters.queryBy=this.additionalSearchParameters.queryBy||"",this.additionalSearchParameters.sortBy=this.additionalSearchParameters.sortBy||"",this.additionalSearchParameters.highlightFullFields=this.additionalSearchParameters.highlightFullFields||this.additionalSearchParameters.queryBy,this.geoLocationField=a.geoLocationField||"_geoloc",this.collectionSpecificSearchParameters=a.collectionSpecificSearchParameters||{},Object.keys(this.collectionSpecificSearchParameters).forEach((function(e){var a=t.collectionSpecificSearchParameters[e].highlightFullFields||t.collectionSpecificSearchParameters[e].queryBy;a&&(t.collectionSpecificSearchParameters[e].highlightFullFields=a)}))}return(0,n.default)(e,[{key:"validate",value:function(){if(0===this.additionalSearchParameters.queryBy.length&&Object.values(this.collectionSpecificSearchParameters).some((function(e){return 0===(e.queryBy||"").length})))throw new Error("Missing parameter: Either additionalSearchParameters.queryBy needs to be set, or all collectionSpecificSearchParameters need to have .queryBy set")}}]),e}();t.Configuration=i},63:function(e,t,a){"use strict";var r=a(29);Object.defineProperty(t,"__esModule",{value:!0}),t.FacetSearchResponseAdapter=void 0;var s=r(a(30)),n=r(a(31)),i=a(64),c=function(){function e(t,a){(0,s.default)(this,e),this.typesenseResponse=t,this.instantsearchRequest=a}return(0,n.default)(e,[{key:"_adaptFacetHits",value:function(e){var t=this;return e.find((function(e){return e.field_name===t.instantsearchRequest.params.facetName})).counts.map((function(e){return{value:e.value,highlighted:t._adaptHighlightTag(e.highlighted,t.instantsearchRequest.params.highlightPreTag,t.instantsearchRequest.params.highlightPostTag),count:e.count}}))}},{key:"adapt",value:function(){return{facetHits:this._adaptFacetHits(this.typesenseResponse.facet_counts),exhaustiveFacetsCount:!0,processingTimeMS:this.typesenseResponse.search_time_ms}}}]),e}();t.FacetSearchResponseAdapter=c,Object.assign(c.prototype,i.utils)},64:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utils=void 0;var r={_adaptHighlightTag:function(e,t,a){return e.replace(new RegExp("<mark>","g"),t).replace(new RegExp("</mark>","g"),a)},_adaptNumberOfPages:function(){var e=this.typesenseResponse.found/this.typesenseResponse.request_params.per_page;return Number.isFinite(e)?Math.ceil(e):1}};t.utils=r},97:function(e,t,a){"use strict";a.r(t);var r=a(2),s=a.n(r),n=a(50),i=a.n(n),c=(a(58),a(101)),o=a(103),h=a(102),u=a(104),l=a(100),d=a(51),p=a.n(d),f=a(5);var v=function(){var e=new p.a({server:{nodes:[{applicationId:"npm",host:"imdb.anvere.net",protocol:"https"}]}}).searchClient;return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("header",{className:"header",children:[Object(f.jsx)("h1",{className:"header-title",children:Object(f.jsx)("a",{href:"/",children:"Fast npm search by Anvere"})}),Object(f.jsxs)("p",{className:"header-subtitle",children:["using\xa0",Object(f.jsx)("a",{href:"https://github.com/algolia/instantsearch.js",children:"Anvere + InstantSearch.js"})]})]}),Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)(c.a,{indexName:"npm",searchClient:e,children:[Object(f.jsx)(o.a,{}),Object(f.jsx)(h.a,{hitComponent:function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)("a",{className:"hit-name",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.hit._highlightResult.name.value},href:"https://www.npmjs.com/package/".concat(e.hit.id),target:"_blank"}),Object(f.jsx)("div",{className:"hit-description",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.hit._highlightResult.description.value}})]})}}),Object(f.jsx)(u.a,{hitsPerPage:8}),Object(f.jsx)(l.a,{})]})})]})},m=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,105)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),r(e),s(e),n(e),i(e)}))};i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(v,{})}),document.getElementById("root")),m()}},[[97,1,2]]]);
//# sourceMappingURL=main.cb86697e.chunk.js.map